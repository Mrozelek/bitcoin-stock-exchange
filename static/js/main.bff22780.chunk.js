(this["webpackJsonpbitcoin-stock-exchange"]=this["webpackJsonpbitcoin-stock-exchange"]||[]).push([[0],{106:function(e,t,n){e.exports={wrapper:"siteHeading_wrapper__3lmlz",buttonContainer:"siteHeading_buttonContainer__rQIQP"}},154:function(e,t,n){e.exports={wrapper:"App_wrapper__RCHjb"}},197:function(e,t,n){},297:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);var r,a=n(4),c=n(0),u=n.n(c),i=n(10),s=n.n(i),o=n(30),l=n(67),d=n(87),p=n(16),f=n(38),b=n(47),j=n(120),m=n(147),h=n(17),O=n(13),x=n(14),v=function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,[{key:"setName",value:function(e){return this.name=e.toUpperCase(),this}},{key:"setChange",value:function(e){return this.change=e,this}},{key:"setPrice",value:function(e){return this.price=e,this}},{key:"setCap",value:function(e){return this.cap=e,this}},{key:"setImageUrl",value:function(e){return this.imageUrl=e,this}},{key:"build",value:function(){return{uuid:this.name,name:this.name,change:this.change,price:this.price,cap:this.cap,imageUrl:this.imageUrl}}}]),e}(),y=n(7),g=n.n(y),w=n(12),k=n(148),N=n.n(k),I="USD",_="usersProfiles",E=function(e){return(0,e.setUseSnackbarRef)(Object(d.b)()),null},C=function(e){r=e},D=function(){return Object(a.jsx)(E,{setUseSnackbarRef:C})},T={success:function(e){this.toast(e,{variant:"success"})},warning:function(e){this.toast(e,{variant:"warning"})},info:function(e){this.toast(e,{variant:"info"})},error:function(e){this.toast(e,{variant:"error"})},toast:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.enqueueSnackbar(e,t)},dismiss:function(e){r.closeSnackbar(e)}},P="noConnection",A=["bitcoin","ethereum","cardano","dogecoin","ripple","polkadot","uniswap","chainlink","litecoin","stellar"],S="stock/get/init",R="stock/get/success",H="stock/get/failure",U=function(){var e=Object(w.a)(g.a.mark((function e(){var t,n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.round((new Date).getTime()/1e3),n="".concat("https://api.coingecko.com/api/v3/coins/markets","?vs_currency=").concat(I,"&ids=").concat(A.join(","),"&cb=").concat(t),e.next=4,N.a.get(n);case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){return function(){var e=Object(w.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:S}),e.prev=1,e.next=4,U();case 4:n=e.sent,t({type:R,payload:{stockData:n}}),T.dismiss(P),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t((r=e.t0.message,{type:H,payload:{error:r}})),T.toast(e.t0.message,{variant:"error",preventDuplicate:!0,persist:!0,key:P});case 13:case"end":return e.stop()}var r}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},L={stockData:[],isLoading:!0,isError:!1,error:null},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0,isError:!1,error:L.error});case R:return Object(h.a)(Object(h.a)({},e),{},{stockData:t.payload.stockData.map((function(e){return(new v).setName(e.symbol).setChange(e.price_change_percentage_24h).setPrice(e.current_price).setCap(e.market_cap).setImageUrl(e.image).build()})),isLoading:!1});case H:return Object(h.a)(Object(h.a)({},e),{},{stockData:L.stockData,isLoading:!1,isError:!0,error:t.payload.error});default:return e}},G=n(103),M=n.n(G),V={getItem:function(e){return Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",M.a.getItem(e));case 1:case"end":return t.stop()}}),t)})))()},setItem:function(e,t){return Object(w.a)(g.a.mark((function n(){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",M.a.setItem(e,t));case 1:case"end":return n.stop()}}),n)})))()}},q=function(){var e=Object(w.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.getItem(_);case 2:return e.abrupt("return",e.sent.find((function(e){return e.userId===t})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.getItem(_);case 2:return n=e.sent,-1===(r=n.findIndex((function(e){return e.userId===t.userId})))?n.push(t):n[r]=t,e.next=7,V.setItem(_,n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=V,Y=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,r,a,c,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.wallet,a=t.currencyName,c=t.amount,e.next=3,r.getFunds({userId:n,currencyName:a});case 3:return u=e.sent,e.abrupt("return",u+c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=e.profile,n=e.newFunds,r=e.currencyName;t.funds[r]=n},X=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,r,a,c,u,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.wallet,a=t.currencyName,c=t.amount,e.next=3,Y({userId:n,wallet:r,currencyName:a,amount:c});case 3:return u=e.sent,e.next=6,q(n);case 6:return i=e.sent,z({profile:i,newFunds:u,currencyName:a}),e.next=10,J(i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K={getFunds:function(e){return Object(w.a)(g.a.mark((function t(){var n,r,a,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.userId,a=e.currencyName,t.next=3,q(r);case 3:return c=t.sent.funds,t.abrupt("return",a?null!==(n=c[a])&&void 0!==n?n:0:c);case 5:case"end":return t.stop()}}),t)})))()},addFunds:function(e){return Object(w.a)(g.a.mark((function t(){var n,r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userId,r=e.currencyName,a=e.amount,t.next=3,X({userId:n,wallet:K,currencyName:r,amount:a});case 3:case"end":return t.stop()}}),t)})))()},subtractFunds:function(e){return Object(w.a)(g.a.mark((function t(){var n,r,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userId,r=e.currencyName,a=e.amount,t.next=3,X({userId:n,wallet:K,currencyName:r,amount:-a});case 3:case"end":return t.stop()}}),t)})))()}},W=K,Z=n(24),$=n(25),ee=n(88),te=function(e){Object(Z.a)(n,e);var t=Object($.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,"User do not have enough funds")).name=e.constructor.name,e}return n}(Object(ee.a)(Error)),ne=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,r,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.wallet,a=t.currencyName,c=t.amountToPay,e.next=3,r.getFunds({userId:n,currencyName:a});case 3:if(!(e.sent<c)){e.next=6;break}throw new te;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(w.a)(g.a.mark((function e(t){var n,r,a,c,u,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,r=t.wallet,a=t.currencyToBuy,c=t.currencyToPay,u=t.amountToBuy,i=t.amountToPay,e.next=3,ne({userId:n,wallet:r,currencyName:c,amountToPay:i});case 3:return e.next=5,r.addFunds({userId:n,currencyName:a,amount:u});case 5:return e.next=7,r.subtractFunds({userId:n,currencyName:c,amount:i});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W;return{buyCrypto:function(t){return Object(w.a)(g.a.mark((function n(){var r,a,c,u;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.userId,a=t.currencyName,c=t.amount,u=t.price,n.next=3,re({userId:r,wallet:e,currencyToBuy:a,currencyToPay:I,amountToBuy:c,amountToPay:c*u});case 3:case"end":return n.stop()}}),n)})))()},sellCrypto:function(t){return Object(w.a)(g.a.mark((function n(){var r,a,c,u;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.userId,a=t.currencyName,c=t.amount,u=t.price,n.next=3,re({userId:r,wallet:e,currencyName:a,currencyToBuy:I,currencyToPay:a,amountToBuy:c*u,amountToPay:c});case 3:case"end":return n.stop()}}),n)})))()}}},ce="exchange/make/init",ue="exchange/make/success",ie="exchange/make/failure",se=function(e,t){return{type:ie,payload:{transactionInfo:e,error:t}}},oe=function(e){return{type:ue,payload:{transactionInfo:e}}},le={isLoading:!0,isError:!1,error:null},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0,isError:!1,error:le.error});case ue:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});case ie:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1,isError:!0,error:t.payload.error});default:return e}},pe=function(e){return Object(b.c)({router:Object(l.b)(e),stock:F,exchange:de})},fe=n(149),be=function(e,t){e.transactions=[].concat(Object(p.a)(e.transactions),[t])},je=function(){var e=Object(w.a)(g.a.mark((function e(t,n){var r,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={time:fe.DateTime.now().toISO(),transactionInfo:t,error:null!==(r=null===n||void 0===n?void 0:n.message)&&void 0!==r?r:n},e.next=3,q(t.userId);case 3:return c=e.sent,be(c,a),e.next=7,J(c);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=[function(){return function(e){return function(t){switch(t.type){case ue:je(t.payload.transactionInfo);break;case ie:je(t.payload.transactionInfo,t.payload.error)}e(t)}}}],he=Object(f.a)(),Oe=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d)(b.a.apply(void 0,[Object(j.a)(he),m.a].concat(Object(p.a)(me))));var xe=n(343),ve=(n(197),{HEADING_1:"heading-1",HEADING_2:"heading-2",HEADING_3:"heading-3",HEADING_4:"heading-4",HEADING_5:"heading-5",HEADING_6:"heading-6",PARAGRAPH_1:"paragraph-1",PARAGRAPH_2:"paragraph-2",LABEL:"label"}),ye={PRIMARY:"primary",SECONDARY:"secondary",MUTED:"muted",ACCENT:"accent",WARNING:"warning",SUCCESS:"success",ERROR:"error",BRIGHT:"bright"},ge=function(e,t){var n=Object.values(ve),r=t?/paragraph-\d+/:/heading-\d+/;return n.filter((function(e){return r.test(e)})).some((function(t){return t===e}))},we=function(e){var t=e.text,n=e.type,r=e.state,c=e.labelControl,u="text ".concat(ve[n]," ").concat(ye[r]),i=function(e){if(ge(e,!0))return"p";if(ge(e,!1)){var t=function(e){return e.slice(-1)}(e);return"h".concat(t)}return e}(ve[n]);return Object(a.jsx)(i,Object(h.a)(Object(h.a)({},"label"===i?{htmlFor:c}:{}),{},{className:u,children:t}))};we.defaultProps={state:"PRIMARY",labelControl:""};var ke,Ne,Ie=we,_e=n(106),Ee=n.n(_e),Ce=function(){return Object(a.jsxs)("div",{className:Ee.a.wrapper,children:[Object(a.jsx)(Ie,{text:"Cryptocurrency stock exchange",type:"HEADING_3",state:"ACCENT"}),Object(a.jsxs)("div",{className:Ee.a.buttonContainer,children:[Object(a.jsx)(xe.a,{variant:"outlined",color:"primary",children:"Log in"}),Object(a.jsx)(xe.a,{variant:"contained",color:"primary",children:"Register"})]})]})},De=n(34),Te=n(354),Pe=n(299),Ae=n(307),Se=n(304),Re=n(356),He=n(302),Ue=n(345),Be=n(155),Le=n(91),Fe=n(71),Ge=n.n(Fe),Me={isBuying:!0,currencyName:"",price:"",amount:0,total:""},Ve="The field is required",qe="Value must be a number",Je="Amount must be a positive number",Qe=Le.b().shape({currencyName:Le.c().required(Ve),amount:Le.a(qe).positive(Je).transform((function(e){return Number.isNaN(e)?void 0:e})).required(Ve)}),Ye=function(e){var t,n=e.stockExchangeData,r=Object(De.e)({mode:"onChange",defaultValues:Me,resolver:Object(Be.a)(Qe)}),u=r.reset,i=r.control,s=r.handleSubmit,l=r.watch,d=r.setValue,p=r.getValues,f=r.formState,b=f.errors,j=f.isValid,m=[l("isBuying"),l("currencyName"),l("amount")],O=m[0],x=m[1],v=m[2],y=Object(o.d)();return Object(c.useEffect)((function(){var e;d("price",(null===(e=n.find((function(e){return e.name===x})))||void 0===e?void 0:e.price)||"")}),[x,n]),Object(c.useEffect)((function(){if(v&&x&&!b.amount){var e,t=(null===(e=n.find((function(e){return e.name===x})))||void 0===e?void 0:e.price)*p("amount");d("total",parseFloat(t.toFixed(2)))}}),[v,x,b.amount,n]),Object(a.jsxs)("form",{onSubmit:s((function(e){var t,n=e.amount,r=e.currencyName,a=e.isBuying,c=e.price;y((t={userId:1,amount:n,currencyName:r,isBuying:a,price:c},function(){var e=Object(w.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n({type:ce}),e.prev=1,!t.isBuying){e.next=7;break}return e.next=5,ae().buyCrypto(t);case 5:e.next=9;break;case 7:return e.next=9,ae().sellCrypto(t);case 9:n(oe(t)),T.success("Exchange successful"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),n(se(t,e.t0.message)),T.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()))})),className:Ge.a.wrapper,children:[Object(a.jsxs)("div",{className:Ge.a.heading,children:[Object(a.jsx)(Ie,{text:"Transaction Type:",type:"HEADING_5"}),Object(a.jsx)(Ie,{text:O?"Buy":"Sell",type:"HEADING_5",state:O?"SUCCESS":"ACCENT"}),Object(a.jsx)(De.a,{name:"isBuying",control:i,render:function(e){var t=e.field;return Object(a.jsx)(Te.a,Object(h.a)({color:"primary",checked:t.value,inputProps:{"aria-label":"primary checkbox"}},t))}})]}),Object(a.jsxs)("div",{className:Ge.a.form,children:[Object(a.jsxs)(Pe.a,{variant:"outlined",error:!!b.currencyName,children:[Object(a.jsx)(Ae.a,{id:"currencyName",children:"Name"}),Object(a.jsx)(De.a,{name:"currencyName",control:i,render:function(e){var t=e.field;return Object(a.jsx)(Se.a,Object(h.a)(Object(h.a)({labelId:"currencyName",id:"currencyName",label:"currencyName",inputProps:{"data-testid":"currencyName"}},t),{},{children:n.map((function(e){return Object(a.jsx)(Re.a,{value:e.name,children:e.name},e.uuid)}))}))}}),Object(a.jsx)(He.a,{children:null===(t=b.currencyName)||void 0===t?void 0:t.message})]}),Object(a.jsx)(De.a,{name:"price",control:i,render:function(e){var t=e.field;return Object(a.jsx)(Ue.a,Object(h.a)({id:"price",label:"Price",variant:"outlined",disabled:!0},t))}}),Object(a.jsx)(De.a,{name:"amount",control:i,render:function(e){var t,n=e.field;return Object(a.jsx)(Ue.a,Object(h.a)({id:"amount",type:"number",label:"Amount",variant:"outlined",error:!!b.amount,helperText:null===(t=b.amount)||void 0===t?void 0:t.message},n))}}),Object(a.jsx)(De.a,{name:"total",control:i,render:function(e){var t=e.field;return Object(a.jsx)(Ue.a,Object(h.a)({id:"total",label:"Total",variant:"outlined",disabled:!0},t))}})]}),Object(a.jsxs)("div",{className:Ge.a.buttonContainer,children:[Object(a.jsx)(xe.a,{disabled:!j,type:"submit",variant:"contained",color:"primary",children:"Confirm"}),Object(a.jsx)(xe.a,{variant:"outlined",color:"primary",onClick:function(){return u(Me)},children:"Reset"})]})]})},ze=function(){var e=Object(o.e)((function(e){return e.stock})).stockData;return Object(a.jsx)(Ye,{stockExchangeData:e})},Xe=n(342),Ke=n(352),We=n(346),Ze=n(344),$e=n(347),et=n(348),tt=n(349),nt=n(350),rt=n(351),at=n(357),ct="#14a38b",ut="#ff7171",it=function(e){return(Math.round(100*e)/100).toFixed(2)},st=function(e){var t=e.split(".")[0].split(""),n=0,r=t.reduceRight((function(e,r){return(++n%3===0&&n!==t.length?",".concat(r):r).concat(e)}),"");return"".concat(r,".").concat(e.split(".")[1])},ot=function(e){var t=it(e),n=st(t);return"".concat(n," ").concat(I)},lt=function(e){var t=it(e);return t>=0?"+".concat(t,"%"):"".concat(t,"%")},dt=function(e){var t=it(e),n=st(t);return e?"".concat(n,"M ").concat(I):"Unknown"},pt=function(e){var t=function(e){return e.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{price:ot(e.price),change:lt(e.change),cap:dt(e.cap)})}))}(e.stockExchangeData||[]);return Object(a.jsx)(We.a,{component:Ze.a,children:Object(a.jsxs)($e.a,{"aria-label":"simple table",children:[Object(a.jsx)(et.a,{children:Object(a.jsxs)(tt.a,{children:[Object(a.jsx)(nt.a,{}),Object(a.jsx)(nt.a,{children:"Name"}),Object(a.jsx)(nt.a,{align:"right",children:"Current Price"}),Object(a.jsx)(nt.a,{align:"right",children:"24h Change"}),Object(a.jsx)(nt.a,{align:"right",children:"Market Cap"})]})}),Object(a.jsx)(rt.a,{children:t.map((function(e){return Object(a.jsxs)(tt.a,{children:[Object(a.jsx)(nt.a,{component:"th",scope:"row",children:Object(a.jsx)(at.a,{alt:e.name,src:e.imageUrl})}),Object(a.jsx)(nt.a,{component:"th",scope:"row",children:e.name}),Object(a.jsx)(nt.a,{align:"right",children:e.price}),Object(a.jsx)(nt.a,{style:"+"===e.change[0]?{color:ct}:{color:ut},align:"right",children:e.change}),Object(a.jsx)(nt.a,{align:"right",children:e.cap})]},e.uuid)}))})]})})},ft=Object(Xe.a)((function(){return{center:{display:"flex",justifyContent:"center"}}})),bt=[],jt=function(){var e=Object(o.e)((function(e){return e.stock})),t=e.isLoading,n=e.isError,r=e.stockData,u=ft();return Object(c.useEffect)((function(){ke=!0}),[]),t&&ke?(ke=!1,Object(a.jsx)("div",{className:u.center,children:Object(a.jsx)(Ke.a,{})})):n||t?Object(a.jsx)(pt,{stockExchangeData:bt}):(bt=r,Object(a.jsx)(pt,{stockExchangeData:r}))},mt=n(90),ht=function(){var e=Object(o.d)();return Object(c.useEffect)((function(){e(B());var t=setInterval((function(){return e(B())}),1e4);return function(){clearInterval(t)}}),[]),Object(a.jsxs)("div",{className:mt.wrapper,children:[Object(a.jsx)("div",{className:mt.table,children:Object(a.jsx)(jt,{})}),Object(a.jsx)("div",{className:mt.transaction,children:Object(a.jsx)(ze,{})})]})},Ot=n(154),xt=function(){return Q.setItem(_,[{userId:1,funds:{ETH:5,USD:10},transactions:[]}]),Object(a.jsxs)("div",{className:Ot.wrapper,children:[Object(a.jsx)(Ce,{}),Object(a.jsx)(ht,{})]})},vt=(n(297),Object(b.e)(pe(he),Ne,Oe));s.a.render(Object(a.jsx)(u.a.StrictMode,{children:Object(a.jsx)(o.a,{store:vt,children:Object(a.jsx)(l.a,{history:he,children:Object(a.jsxs)(d.a,{maxSnack:3,children:[Object(a.jsx)(D,{}),Object(a.jsx)(xt,{})]})})})}),document.getElementById("root"))},71:function(e,t,n){e.exports={wrapper:"transaction_wrapper__2LVHf",heading:"transaction_heading__3AQgH",form:"transaction_form__qcdEJ",buttonContainer:"transaction_buttonContainer__13Lbz"}},90:function(e,t,n){e.exports={wrapper:"marketPage_wrapper__O-uTb",table:"marketPage_table__1RKhs",transaction:"marketPage_transaction__9ouPs"}}},[[298,1,2]]]);
//# sourceMappingURL=main.bff22780.chunk.js.map